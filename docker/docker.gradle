task setupDocker {
    dependsOn getTasksByName('jarjar', true)
    dependsOn getTasksByName('buildPython', true)
    doLast {
        copy {
            from 'deploy/SEDE'
            into 'docker/jbase/bin'
        }
        copy {
            from 'deploy/SEDE_Python'
            into 'docker/python-executor/bin'
        }
    }
}
task buildDocker {
    dependsOn getTasksByName('setupDocker', true)
    doLast {
        exec {
            workingDir 'docker'
            commandLine 'docker', 'build', '-t', 'sede:java', 'jbase'
        }
        exec {
            workingDir 'docker'
            commandLine 'docker', 'build', '-t', 'sede:Gateway', 'gateway'
        }
        exec {
            workingDir 'docker'
            commandLine 'docker', 'build', '-t', 'sede:jExecutor', 'java-executor'
        }
        exec {
            workingDir 'docker'
            commandLine 'docker', 'build', '-t', 'sede:pyExecutor', 'python-executor'
        }
    }
}